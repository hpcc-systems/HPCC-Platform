import{_ as i,a,o as e,ag as t}from"./chunks/framework.Do1Zayaf.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"helm/managed/logging/elastic/README.md","filePath":"helm/managed/logging/elastic/README.md","lastUpdated":1771585025000}'),n={name:"helm/managed/logging/elastic/README.md"};function l(h,s,p,k,o,r){return e(),a("div",null,s[0]||(s[0]=[t(`<h2 id="this-folder-contains-lightweight-elastic-stack-deployment-chart-and-hpcc-systems-preferred-values" tabindex="-1">This folder contains lightweight Elastic Stack deployment chart and HPCC Systems preferred values <a class="header-anchor" href="#this-folder-contains-lightweight-elastic-stack-deployment-chart-and-hpcc-systems-preferred-values" aria-label="Permalink to &quot;This folder contains lightweight Elastic Stack deployment chart and HPCC Systems preferred values&quot;">​</a></h2><blockquote><p>⚡ <strong>Note:</strong> Elastic Stack components prior to 7.16.0 have been reported to be affected by the high-severity vulnerability (CVE-2021-44228) impacting multiple versions of the Apache Log4j 2 utility.</p></blockquote><p>Key version guidance:</p><ul><li>elastic4hpcclogs 1.2.2 references Elastic Stack 7.16.3 (Log4j 2.17.1) which by default has no known vulnerabilities to CVE-2021-44832.</li><li>elastic4hpcclogs 1.2.1 references Elastic Stack 7.16.2 (Log4j 2.17.0) which mitigates CVE-2021-44228 and avoids false positives in scanners.</li><li>elastic4hpcclogs 1.2.0 references Elastic Stack 7.16.1.</li><li>Users of older versions are strongly encouraged to upgrade.</li><li>More details: <a href="https://discuss.elastic.co/t/apache-log4j2-remote-code-execution-rce-vulnerability-cve-2021-44228-esa-2021-31/291476" target="_blank" rel="noreferrer">https://discuss.elastic.co/t/apache-log4j2-remote-code-execution-rce-vulnerability-cve-2021-44228-esa-2021-31/291476</a></li></ul><p>This chart describes a local, minimal Elastic Stack instance for HPCC Systems component log processing. Once successfully deployed, HPCC component logs produced within the same namespace should be automatically indexed on the Elastic Search end-point. Users can query those logs by issuing Elastic Search RESTful API queries, or via the Kibana UI (after creating a simple index pattern).</p><p>Out of the box, the Filebeat forwards the HPCC component logs to a generically named index: &#39;hpcc-logs-&#39;&lt;DateStamp&gt; and specifically into a field labeled &#39;message&#39;. It also aggregates k8s, Docker, and system metadata to help the user query the log entries of their interest.</p><p>A Kibana index pattern is created automatically based on the default filebeat index layout.</p><h3 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h3><p>This chart is dependent on the Elastic Stack Helm charts for ElasticSearch, Filebeats and Kibana.</p><h4 id="dependency-update" tabindex="-1">Dependency update <a class="header-anchor" href="#dependency-update" aria-label="Permalink to &quot;Dependency update&quot;">​</a></h4><h5 id="helm-command" tabindex="-1">HELM Command <a class="header-anchor" href="#helm-command" aria-label="Permalink to &quot;HELM Command&quot;">​</a></h5><p>Helm provides a convenient command to automatically pull appropriate dependencies to the /charts directory:</p><blockquote><p>helm dependency update &lt;HPCC-Systems Git clone location&gt;/helm/managed/logging/elastic/</p></blockquote><h5 id="helm-install-parameter" tabindex="-1">HELM Install parameter <a class="header-anchor" href="#helm-install-parameter" aria-label="Permalink to &quot;HELM Install parameter&quot;">​</a></h5><p>Otherwise, provide the &quot;--dependency-update&quot; argument in the helm install command For example:</p><blockquote><p>helm install myelastic &lt;HPCC-Systems Git clone location&gt;/helm/managed/logging/elastic/ --dependency-update</p></blockquote><h3 id="log-query-improvements" tabindex="-1">Log Query Improvements <a class="header-anchor" href="#log-query-improvements" aria-label="Permalink to &quot;Log Query Improvements&quot;">​</a></h3><p>User are encouraged to make use of Elsatic Search &quot;Ingest Pipelines&quot; to improve log query performance and tailor the structure of the log record to meet their needs. The pipelines can be applied to specific indices via Elastic Search API, or via Kibana&#39;s UI.</p><blockquote><p>further reading here: <a href="https://www.elastic.co/blog/structuring-elasticsearch-data-with-grok-on-ingest-for-faster-analytics" target="_blank" rel="noreferrer">https://www.elastic.co/blog/structuring-elasticsearch-data-with-grok-on-ingest-for-faster-analytics</a></p></blockquote><p>The following example creates a pipeline named &#39;hpccpipeline&#39; via the Elastic Search API. Alternatively, the processors can be added via Kibana&#39;s &quot;Ingest Node Pipelines&quot;.</p><div class="language-JSON vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PUT _ingest/pipeline/hpccpipeline</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Parses and structures HPCC Systems component log entries&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;processors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;grok&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;patterns&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;&quot;&quot;%{BASE16NUM:hpcc.log.sequence}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+(%{HPCC_LOG_AUDIENCE:hpcc.log.audience})</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{HPCC_LOG_CLASS:hpcc.log.class}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{TIMESTAMP_ISO8601:hpcc.log.timestamp}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{POSINT:hpcc.log.procid}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{POSINT:hpcc.log.threadid}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{HPCC_LOG_WUID:hpcc.log.jobid}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{QUOTEDSTRING:hpcc.log.message}&quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;&quot;&quot;%{BASE16NUM:hpcc.log.sequence}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{HPCC_LOG_AUDIENCE:hpcc.log.audience}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{HPCC_LOG_CLASS:hpcc.log.class}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">%{TIMESTAMP_ISO8601:hpcc.log.timestamp}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{POSINT:hpcc.log.procid}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{POSINT:hpcc.log.threadid}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{HPCC_LOG_WUID:hpcc.log.jobid}</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+%{GREEDYDATA:hpcc.log.message}&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;pattern_definitions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;HPCC_LOG_WUID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;([A-Z][0-9]{8}-[0-9]{6})|(UNK)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;HPCC_LOG_CLASS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DIS|ERR|WRN|INF|PRO|MET|UNK&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;HPCC_LOG_AUDIENCE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPR|USR|PRG|AUD|UNK&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hpcc.log.timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;formats&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;yyyy-MM-dd&#39; &#39;HH:mm:ss.SSS&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;on_failure&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;set&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hpccpipeline.error.message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ _ingest.on_failure_message }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Once you&#39;ve verified your pipeline was created successfully, the target Elastic Search index should be associated with this pipeline. This is done by adding the option &quot;filebeat.pipeline.filebeatConfig.filebeat.yml.output.elasticsearch.pipeline:&#39;hpccpipeline&#39;&quot;</p><p>For convenience a values file with that option is provided here: <a href="https://raw.githubusercontent.com/hpcc-systems/HPCC-Platform/master/helm/managed/logging/elastic/filebeat-filebeatConfig-hpccpipeline.yaml" target="_blank" rel="noreferrer">HPCC-Platform github repo</a> Which allows users to deploy elastic4hpcclogs with the hpccpipeline setting with out the need to edit the chart.</p><p>For example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myelk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hpcc/elastic4hpcclogs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/hpcc-systems/HPCC-Platform/master/helm/managed/logging/elastic/filebeat-filebeatConfig-hpccpipeline.yaml</span></span></code></pre></div><p>Or the user can choose to upgrade a deployed elastic4hpcclogs</p><p>for example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/hpcc-systems/HPCC-Platform/master/helm/managed/logging/elastic/filebeat-filebeatConfig-hpccpipeline.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myelk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hpcc/elastic4hpcclogs</span></span></code></pre></div><p>Warning: if the named pipeline is not found, the filebeat component might not function correctly.</p><p>The targeted index should now contain a series of &quot;hpcc.log.*&quot; fields which can be used to query and extract specific HPCC component log data.</p><p>For example, search all HPCC component reported errors:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;match_phrase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;hpcc.log.class&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ERR&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="kibana-service-access" tabindex="-1">Kibana Service Access <a class="header-anchor" href="#kibana-service-access" aria-label="Permalink to &quot;Kibana Service Access&quot;">​</a></h3><p>The Managed Kibana service is declared as type LoadBalancer for convenience to the user. However it is imperative to control external access to the service. The service is defaulted to &quot;internal load balancer&quot; on Azure, the user is encouraged to set similar values on the target cloud provider. See the kibana.service.annotations section:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kibana</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HPCC Managed Kibana&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  ##See https://github.com/elastic/helm-charts/blob/master/kibana/values.yaml for all available options</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;managedby&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HPCC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  stedkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">value</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LoadBalancer&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    annotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # This annotation delcares the Azure load balancer for the service as internal rather than internet-visible</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      service.beta.kubernetes.io/azure-load-balancer-internal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # Enable appropriate annotation for target cloud provider to ensure Kibana access is internal</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #service.beta.kubernetes.io/cce-load-balancer-internal-vpc: &quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #cloud.google.com/load-balancer-type: &quot;Internal&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #service.beta.kubernetes.io/aws-load-balancer-internal: &quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #service.beta.kubernetes.io/openstack-internal-load-balancer: &quot;true&quot;</span></span></code></pre></div><h3 id="cleanup" tabindex="-1">Cleanup <a class="header-anchor" href="#cleanup" aria-label="Permalink to &quot;Cleanup&quot;">​</a></h3><p>The Elastic Search chart will declare a PVC which is used to persist data related to its indexes, and thus, the HPCC Component logs. The PVCs by nature can outlive the HPCC and Elastic deployments, it is up to the user to manage the PVC appropriately, which includes deleting the PVC when they are no longer needed.</p>`,37)]))}const g=i(n,[["render",l]]);export{d as __pageData,g as default};
