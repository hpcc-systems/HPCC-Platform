import{_ as i,a,o as n,ag as e}from"./chunks/framework.Do1Zayaf.js";const o=JSON.parse('{"title":"Phone Number Plugin","description":"","frontmatter":{},"headers":[],"relativePath":"plugins/phonenumber/README.md","filePath":"plugins/phonenumber/README.md","lastUpdated":1761843274000}'),h={name:"plugins/phonenumber/README.md"};function l(t,s,p,k,r,E){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="phone-number-plugin" tabindex="-1">Phone Number Plugin <a class="header-anchor" href="#phone-number-plugin" aria-label="Permalink to &quot;Phone Number Plugin&quot;">​</a></h1><p>This plugin provides phone number validation and information extraction capabilities for the HPCC Systems platform, utilizing Google&#39;s libphonenumber library.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The phonenumber plugin offers comprehensive phone number processing capabilities for ECL applications. It leverages Google&#39;s industry-standard libphonenumber library to provide accurate validation, formatting, and metadata extraction for international phone numbers.</p><h3 id="key-features" tabindex="-1">Key Features <a class="header-anchor" href="#key-features" aria-label="Permalink to &quot;Key Features&quot;">​</a></h3><ul><li><strong>Phone number validation</strong> - Determine if a number is valid for its region</li><li><strong>Type classification</strong> - Identify line types (mobile, fixed line, toll-free, etc.)</li><li><strong>Region/country code extraction</strong> - Get ISO country codes and numeric country codes</li><li><strong>International formatting</strong> - Parse and format numbers in E164 standard</li><li><strong>Comprehensive parsing</strong> - Single function to extract all phone number metadata</li></ul><h2 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h2><ul><li>Google libphonenumber library</li><li>Boost (date_time, system, thread)</li><li>CMake build system</li><li>HPCC Platform runtime</li></ul><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><p>The plugin is built automatically when phone number support is enabled in the CMake configuration:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CMake flags which alter plugin lib_phonenumber builds</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  -DINCLUDE_PLUGINS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  -DPHONENUEMBER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  -DINCLUDE_PHONENUMBER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  -DSUPPRESS_PHONENUMBER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ON</span></span></code></pre></div><h2 id="ecl-interface" tabindex="-1">ECL Interface <a class="header-anchor" href="#ecl-interface" aria-label="Permalink to &quot;ECL Interface&quot;">​</a></h2><h3 id="import-statement" tabindex="-1">Import Statement <a class="header-anchor" href="#import-statement" aria-label="Permalink to &quot;Import Statement&quot;">​</a></h3><p>To use the plugin in your ECL code, import the library:</p><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IMPORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber;</span></span></code></pre></div><h3 id="data-types" tabindex="-1">Data Types <a class="header-anchor" href="#data-types" aria-label="Permalink to &quot;Data Types&quot;">​</a></h3><p>The plugin defines the following ECL types:</p><h4 id="phonenumber-type-enum" tabindex="-1">phonenumber_type Enum <a class="header-anchor" href="#phonenumber-type-enum" aria-label="Permalink to &quot;phonenumber_type Enum&quot;">​</a></h4><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">phonenumber_type :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENUM(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INTEGER1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FIXED_LINE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Traditional landline</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    MOBILE,                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Mobile/cellular number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FIXED_LINE_OR_MOBILE,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Could be either type</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    TOLL_FREE,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Toll-free number (800, 888, etc.)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PREMIUM_RATE,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Premium rate service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SHARED_COST,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Shared cost service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    VOIP,                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Voice over IP number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PERSONAL_NUMBER,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Personal numbering service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PAGER,                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pager number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UAN,                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Universal Access Number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    VOICEMAIL,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Voicemail access number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UNKNOWN                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Type cannot be determined</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="phonenumber-error-enum" tabindex="-1">phonenumber_error Enum <a class="header-anchor" href="#phonenumber-error-enum" aria-label="Permalink to &quot;phonenumber_error Enum&quot;">​</a></h4><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">phonenumber_error :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ENUM(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INTEGER1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    NO_PARSING_ERROR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    INVALID_COUNTRY_CODE_ERROR,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    NOT_A_NUMBER,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    TOO_SHORT_AFTER_IDD,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    TOO_SHORT_NSN,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    TOO_LONG_NSN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="phonenumber-data-record" tabindex="-1">phonenumber_data Record <a class="header-anchor" href="#phonenumber-data-record" aria-label="Permalink to &quot;phonenumber_data Record&quot;">​</a></h4><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">phonenumber_data :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RECORD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MAXLENGTH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)};      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Formatted phone number (E164)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    BOOLEAN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> valid;                     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Whether number is valid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    phonenumber_type lineType;         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Type of phone line</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> regionCode{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MAXLENGTH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)};   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ISO country code (e.g., &quot;US&quot;, &quot;GB&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    INTEGER2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> countryCode;              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Numeric country code (e.g., 1, 44)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to &quot;Functions&quot;">​</a></h3><h4 id="parsephonenumber" tabindex="-1">parsePhoneNumber <a class="header-anchor" href="#parsephonenumber" aria-label="Permalink to &quot;parsePhoneNumber&quot;">​</a></h4><p>The primary function that performs comprehensive phone number parsing:</p><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parsePhoneNumber(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CONST</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phonenumber, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CONST</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> countryCode)</span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>phonenumber</code>: The phone number string to parse (can include formatting)</li><li><code>countryCode</code>: Two-letter ISO country code for parsing context (e.g., &#39;US&#39;, &#39;GB&#39;, &#39;DE&#39;)</li></ul><p><strong>Returns:</strong> A dataset containing one <code>phonenumber_data</code> record with all extracted information</p><p><strong>Example:</strong></p><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IMPORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Parse a US phone number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber.parsePhoneNumber(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;+1 516 924 2448&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;US&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Access the parsed data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">phoneData :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get the first (and only) record</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.number);        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;+15169242448&quot; (E164 format)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.valid);         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TRUE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.lineType);      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// MOBILE or FIXED_LINE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.regionCode);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;US&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.countryCode);   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span></code></pre></div><h2 id="usage-examples" tabindex="-1">Usage Examples <a class="header-anchor" href="#usage-examples" aria-label="Permalink to &quot;Usage Examples&quot;">​</a></h2><h3 id="basic-phone-number-parsing" tabindex="-1">Basic Phone Number Parsing <a class="header-anchor" href="#basic-phone-number-parsing" aria-label="Permalink to &quot;Basic Phone Number Parsing&quot;">​</a></h3><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IMPORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Parse a single phone number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">phoneData :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber.parsePhoneNumber(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;(516) 924-2448&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;US&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.number);        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;+15169242448&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.valid);         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TRUE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.lineType);      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Phone type enum value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.regionCode);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;US&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.countryCode);   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span></code></pre></div><h3 id="batch-processing-phone-numbers" tabindex="-1">Batch Processing Phone Numbers <a class="header-anchor" href="#batch-processing-phone-numbers" aria-label="Permalink to &quot;Batch Processing Phone Numbers&quot;">​</a></h3><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IMPORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Input dataset with phone numbers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PhoneRecord :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RECORD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phone;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> country;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> description;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">testNumbers :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DATASET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;+1 516 924 2448&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;US&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Valid US number&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;+44 20 7946 0958&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;GB&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Valid UK number&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;555 012 3456&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;US&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Invalid US number&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;+49 30 123456&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;German number&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], PhoneRecord);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parsedResults :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PROJECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testNumbers,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    TRANSFORM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({PhoneRecord, lib_phonenumber.phonenumber_data},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Copy original fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber.parsePhoneNumber(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.phone, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.country)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parsedResults);</span></span></code></pre></div><h3 id="filtering-valid-numbers" tabindex="-1">Filtering Valid Numbers <a class="header-anchor" href="#filtering-valid-numbers" aria-label="Permalink to &quot;Filtering Valid Numbers&quot;">​</a></h3><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IMPORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Parse and filter to only valid numbers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">validNumbers :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PROJECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testNumbers,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    TRANSFORM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({PhoneRecord, lib_phonenumber.phonenumber_data},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber.parsePhoneNumber(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.phone, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.country)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(valid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Filter to only valid numbers</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(validNumbers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NAMED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ValidPhoneNumbers&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h3 id="phone-number-type-analysis" tabindex="-1">Phone Number Type Analysis <a class="header-anchor" href="#phone-number-type-analysis" aria-label="Permalink to &quot;Phone Number Type Analysis&quot;">​</a></h3><div class="language-ecl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ecl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IMPORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Analyze phone number types</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">phoneAnalysis :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PROJECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testNumbers, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TRANSFORM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PhoneRecord,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lib_phonenumber.phonenumber_data,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typeDescription</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    phoneData :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lib_phonenumber.parsePhoneNumber(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.phone, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.country)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.typeDescription :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CASE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneData.lineType,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lib_phonenumber.phonenumber_type.MOBILE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Mobile Phone&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lib_phonenumber.phonenumber_type.FIXED_LINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Landline&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lib_phonenumber.phonenumber_type.TOLL_FREE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Toll-Free&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lib_phonenumber.phonenumber_type.VOIP </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;VoIP Service&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;Other/Unknown&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> LEFT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phoneData;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OUTPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phoneAnalysis);</span></span></code></pre></div><h2 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h2><p>Comprehensive tests are available in the HPCC Platform test suite:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run the phone number plugin tests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ecl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> thor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testing/regress/ecl/phonenumber.ecl</span></span></code></pre></div><h2 id="performance-considerations" tabindex="-1">Performance Considerations <a class="header-anchor" href="#performance-considerations" aria-label="Permalink to &quot;Performance Considerations&quot;">​</a></h2><ul><li>The plugin uses Google&#39;s optimized libphonenumber library</li><li>Results can be cached for repeated operations on the same numbers</li><li>Consider pre-filtering obviously invalid formats before parsing</li></ul><h2 id="supported-regions" tabindex="-1">Supported Regions <a class="header-anchor" href="#supported-regions" aria-label="Permalink to &quot;Supported Regions&quot;">​</a></h2><p>The plugin supports all regions covered by Google&#39;s libphonenumber library, including:</p><ul><li><strong>North America</strong>: US, CA (country codes +1)</li><li><strong>Europe</strong>: GB (+44), DE (+49), FR (+33), IT (+39), ES (+34)</li><li><strong>Asia</strong>: JP (+81), CN (+86), IN (+91), KR (+82)</li><li><strong>Oceania</strong>: AU (+61), NZ (+64)</li><li><strong>And 200+ other countries and territories</strong></li></ul><p>For the complete list, refer to the <a href="https://github.com/google/libphonenumber" target="_blank" rel="noreferrer">libphonenumber documentation</a>.</p><h2 id="contributing" tabindex="-1">Contributing <a class="header-anchor" href="#contributing" aria-label="Permalink to &quot;Contributing&quot;">​</a></h2><p>When contributing to this plugin:</p><ol><li>Follow the HPCC Platform coding standards in <code>devdoc/StyleGuide.md</code></li><li>Add appropriate tests to the test suite</li><li>Update this README for new functionality</li><li>Ensure compatibility across supported platforms</li></ol><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-label="Permalink to &quot;License&quot;">​</a></h2><p>Licensed under the Apache License, Version 2.0. See the HPCC Systems Platform LICENSE.txt file.</p>`,55)]))}const g=i(h,[["render",l]]);export{o as __pageData,g as default};
