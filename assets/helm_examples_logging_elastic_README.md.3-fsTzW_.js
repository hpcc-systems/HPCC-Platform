import{_ as e,a as s,o as t,ag as i}from"./chunks/framework.Do1Zayaf.js";const g=JSON.parse('{"title":"HPCC Log Processing via Elastic Stack","description":"","frontmatter":{},"headers":[],"relativePath":"helm/examples/logging/elastic/README.md","filePath":"helm/examples/logging/elastic/README.md","lastUpdated":1771585025000}'),l={name:"helm/examples/logging/elastic/README.md"};function n(o,a,h,c,r,p){return t(),s("div",null,a[0]||(a[0]=[i(`<h1 id="hpcc-log-processing-via-elastic-stack" tabindex="-1">HPCC Log Processing via Elastic Stack <a class="header-anchor" href="#hpcc-log-processing-via-elastic-stack" aria-label="Permalink to &quot;HPCC Log Processing via Elastic Stack&quot;">​</a></h1><h2 id="hpcc-managed-lightweight-elastic-stack" tabindex="-1">HPCC Managed Lightweight Elastic Stack <a class="header-anchor" href="#hpcc-managed-lightweight-elastic-stack" aria-label="Permalink to &quot;HPCC Managed Lightweight Elastic Stack&quot;">​</a></h2><p>HPCC provides a simple chart for deployment of a local, light-weight Elastic Stack instance. Please view HPCC-Platform/helm/managed/logging/elastic for more information</p><h2 id="stand-alone-elastic-stack" tabindex="-1">Stand Alone Elastic Stack <a class="header-anchor" href="#stand-alone-elastic-stack" aria-label="Permalink to &quot;Stand Alone Elastic Stack&quot;">​</a></h2><p>Setting up a base Elastic Stack cluster to process HPCC Systems component logs is straightforward. Elastic provides Helm charts to deploy each of their components, so we&#39;ll add the Elastic helm-charts repository locally:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elastic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://helm.elastic.co</span></span></code></pre></div><p>We&#39;ll install the Filebeat component (log agent) , and ElasticSearch (log store and indexer). By default, Filebeat will forward the log entries to the ElasticSearch default endpoint:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> filebeat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elastic/filebeat</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elasticsearch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elastic/elasticsearch</span></span></code></pre></div><p>Finally, the Kibana component can also be installed to be used as a front end, which allows log index management, log querying, and visualization:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kibana</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elastic/kibana</span></span></code></pre></div><p>Each of the Elastic components should be configured appropriately based on the cluster needs, detailed documentation can be found on the elastic GitHub page <a href="https://github.com/elastic/helm-charts/" target="_blank" rel="noreferrer">https://github.com/elastic/helm-charts/</a></p><p>Inspecting the Elastic pods and services, expect a Filebeat pod for each of the nodes in your cluster, a configurable number of ElasticSearch pods, and a service for both Kibana and ElasticSearch.</p><p>Of utmost importance are the persistent volumes created by ElasticSearch on which the log indexes are stored. Review the ElasticSearch helm-charts GitHub page for details on all available configuration options.</p><p>Port forwarding might be required to expose the Kibana interface</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port-forward</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service/kibana-kibana</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5601</span></span></code></pre></div><p>Once all the components are working successfully, the logs will be written to a &#39;hpcc-logs&#39; prefixed index on ElasticSearch, and it can be managed from the Kibana interface. Some index content retention policy rules can be configured here.</p><p>The default filebeat configuration aggregates several Kubernetes metadata fields to each log entry forwarded to ElasticSearch. The Kubernetes fields can be used to identify the HPCC component responsible for each entry, and the source pod and or node on which the event was reported.</p><p>&lt;kibana discovery page screenshot&gt;</p><p>Kibana discovery page showing several HPCC Systems component log entries. All other log entries not created by HPCC components are filtered out by the filter at the top left corner. The Kubernetes container name, node name, and pod name accompany the “message” field which contains the actual log entry.</p>`,19)]))}const k=e(l,[["render",n]]);export{g as __pageData,k as default};
