name: Check that eclhelper interface has not changed

on:
  pull_request:
    branches:
      - "master"
      - "candidate-*"

jobs:
  pre_job:
     # continue-on-error: true # Uncomment once integration is finished
     runs-on: ubuntu-latest
     # Map a step output to a job output
     outputs:
       should_skip: ${{ steps.skip_check.outputs.should_skip }}
     steps:
       - id: skip_check
         uses: hpcc-systems/skip-duplicate-actions@master
         with:
           github_token: ${{ github.token }}
           paths: '["rtl/include/eclhelper.hpp" ]'
  build:
    name: "Check eclhelper interface"
    runs-on: ubuntu-latest
    needs: pre_job
    if: ${{ github.repository == 'hpcc-systems/HPCC-Platform' && needs.pre_job.outputs.should_skip != 'true' }}
    steps:
      - name: Fail
        working-directory: .
        run: false
